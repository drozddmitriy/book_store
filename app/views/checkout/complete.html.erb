<main class="container general-main-wrap">
  <h1 class="general-title-margin">Checkout</h1>
  <%= render 'steps_header' %>
  <div class="text-center mb-40">
    <h3 class="general-subtitle">Thank You for your Order!</h3>
    <p class="fw-300"><%= "An order confirmation has been sent to #{current_user.email}" %></p>
  </div>
  <div class="row mb-20">
    <div class="col-sm-6">
      <div class="visible-xs">
        <p class="general-order-number mb-0"><%= "Order ##{@checkout.number}" %></p>
        <p class="general-address mb-30"><%= @checkout.completed_at.strftime("%B %-d, %Y") %></p>
      </div>
      <p class="general-address">
        <%= "#{@checkout.addresses.first.firstname} #{@checkout.addresses.first.lastname}" %>
        <br/>
        <%= @checkout.addresses.first.address %>
        <br/>
        <%= "#{@checkout.addresses.first.city} #{@checkout.addresses.first.zip}" %>
        <br/>
        <%= @checkout.addresses.first.country %>
        <br/>
        <%= "Phone #{@checkout.addresses.first.phone}" %>
      </p>
    </div>
    <div class="col-sm-6 hidden-xs text-right">
      <p class="general-order-number mb-0"><%= "Order ##{@checkout.number}" %></p>
      <p class="general-address mb-30"><%= @checkout.completed_at.strftime("%B %-d, %Y") %></p>
    </div>
  </div>
  <div class="visible-xs">
    <% @checkout.line_items.each do |line_item| %>
      <div class="general-cart-item divider-lg">
        <div class="general-img-wrap-table">
          <%= link_to line_item.book.images.first.url do %>
            <%= image_tag line_item.book.images.first.url, class: "img-shadow general-thumbnail-img", alt: "design-book" %>
          <% end %>
        </div>
        <p class="title">
          <%= line_item.book.title %>
        </p>
        <table class="table">
          <tr>
            <td>
              <span class="in-grey-600">Price</span>
            </td>
            <td>
              <span class="font-16 in-gold-500">
                <%= number_to_currency(line_item.book.price, unit: "€") %>
              </span>
            </td>
          </tr>
          <tr>
            <td class="vertical-middle">
              <span class="in-grey-600">Quantity</span>
            </td>
            <td>
              <span>
                <%= line_item.quantity %>
              </span>
            </td>
          </tr>
          <tr>
            <td>
              <span class="in-grey-600">SubTotal</span>
            </td>
            <td>
              <span class="font-16 in-gold-500">
                <%= number_to_currency(line_item.total_price, unit: "€") %>
              </span>
            </td>
          </tr>
        </table>
      </div>
    <% end %>
  </div>
  <div class="hidden-xs divider-lg pt-20">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>
            <span class="in-grey-600">Book</span>
          </th>
          <th class="col-method"></th>
          <th>
            <span class="in-grey-600">Price</span>
          </th>
          <th>
            <span class="in-grey-600">Quantity</span>
          </th>
          <th>
            <span class="in-grey-600">Total</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <% @checkout.line_items.each do |line_item| %>
          <tr>
            <td>
              <div class="general-img-wrap-table">
                <%= link_to line_item.book.images.first.url do %>
                  <%= image_tag line_item.book.images.first.url, class: "img-shadow general-thumbnail-img", alt: "design-book" %>
                <% end %>
              </div>
            </td>
            <td>
              <p class="title">
                <%= line_item.book.title %>
              </p>
              <p class="in-grey-600 fw-300">
                <%= truncate(line_item.book.description, :length => 250) %>
              </p>
            </td>
            <td>
              <span class="font-16 in-gold-500">
                <%= number_to_currency(line_item.book.price, unit: "€") %>
              </span>
            </td>
            <td>
              <span class="ml-30">
                <%= line_item.quantity %>
              </span>
            </td>
            <td>
              <span class="font-16 in-gold-500">
                <%= number_to_currency(line_item.total_price, unit: "€") %>
              </span>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <div class="text-center general-text-right">
    <p class="in-gold-500 font-18">Order Summary</p>
    <table class="general-summary-table general-summary-table-right general-text-right">
      <%= render 'order_summary', order: @checkout.decorate %>
    </table>
  </div>
  <div class="text-center">
    <%= link_to "Back to Store", root_path, class: 'btn btn-default mb-20' %>
  </div>
</main>
